(this.webpackJsonpsmart_garden_web=this.webpackJsonpsmart_garden_web||[]).push([[0],{15:function(e,t,n){e.exports={homepage:"Login_homepage__1UY5l",container:"Login_container__1PmnF","form-login":"Login_form-login__3ULuK","form-input":"Login_form-input__32RYi","form-button":"Login_form-button__2I4iw","form-control":"Login_form-control__ngMYl",wrapper:"Login_wrapper__3KVs_","submit-button":"Login_submit-button__35P4b"}},20:function(e,t,n){e.exports={"weather-button":"Weather_weather-button__3Ovu5","weather-container":"Weather_weather-container__MS1pH","weather-info":"Weather_weather-info__1chw9"}},4:function(e,t,n){e.exports={logo:"Nav_logo__1YG7V",navLinks:"Nav_navLinks__32f0V",burger:"Nav_burger__2fE4z",open:"Nav_open__1aekA",toggle:"Nav_toggle__4Vgyk",line1:"Nav_line1__3-PPz",line2:"Nav_line2__3myeT",line3:"Nav_line3__3x5bl"}},44:function(e,t,n){},45:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(34),c=n.n(a),o=(n(44),n(45),n(11)),i=n.n(o),l=n(12),j=n(9),u=n(35),b=n(36),h=n(39),d=n(38),g=n(17),O=n.n(g),x=n(0),p=Object(r.createContext)(),f=O.a.create({baseURL:"https://smartgarden.ddns.net/php-login-registration-api/"}),m=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={isAuth:!1,theUser:null},e.logoutUser=function(){localStorage.removeItem("loginToken"),e.setState(Object(j.a)(Object(j.a)({},e.state),{},{isAuth:!1}))},e.loginUser=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.post("login.php",{user:t.login,pass:t.password});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.isLoggedIn=Object(l.a)(i.a.mark((function t(){var n,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=localStorage.getItem("loginToken"))){t.next=8;break}return f.defaults.headers.common.Authorization="bearer "+n,t.next=5,f.get("user-info.php");case 5:r=t.sent,(s=r.data).success&&s.user&&e.setState(Object(j.a)(Object(j.a)({},e.state),{},{isAuth:!0,theUser:s.user}));case 8:case"end":return t.stop()}}),t)}))),e.isLoggedIn(),e}return Object(b.a)(n,[{key:"render",value:function(){var e={rootState:this.state,isLoggedIn:this.isLoggedIn,loginUser:this.loginUser,logoutUser:this.logoutUser};return Object(x.jsx)(p.Provider,{value:e,children:this.props.children})}}]),n}(r.Component),v=n(5),_=n(2),w=n(14),k=n(4),N=n.n(k),y=n(18),L=n.n(y);var C=function(e){var t=e.menuToggle,n=e.setMenuToggle;return Object(x.jsxs)("div",{className:t?L()(N.a.burger,N.a.toggle):N.a.burger,onClick:function(){n(!t)},children:[Object(x.jsx)("div",{className:N.a.line1}),Object(x.jsx)("div",{className:N.a.line2}),Object(x.jsx)("div",{className:N.a.line3})]})};var S=function(){var e=Object(r.useState)(!1),t=Object(w.a)(e,2),n=t[0],s=t[1],a={color:"#ffffff",textDecoration:"none",fontSize:"22px"},c=Object(r.useContext)(p),o=c.rootState,i=c.logoutUser;return o.isAuth?Object(x.jsxs)("nav",{children:[Object(x.jsx)("div",{className:N.a.logo}),Object(x.jsxs)("ul",{className:n?L()(N.a.open,N.a.navLinks):N.a.navLinks,children:[Object(x.jsx)(v.b,{style:a,to:"/valves",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"Zawory"})}),Object(x.jsx)(v.b,{style:a,to:"/weather",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"Pogoda"})}),Object(x.jsx)(v.b,{style:a,to:"/about",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"O stronie"})}),Object(x.jsx)(v.b,{style:a,to:"/contact",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"Kontakt"})}),Object(x.jsx)(v.b,{style:a,to:"/",children:Object(x.jsx)("li",{onClick:function(){i(),s(!n)},children:"Wyloguj"})})]}),Object(x.jsx)(C,{menuToggle:n,setMenuToggle:s})]}):Object(x.jsxs)("nav",{children:[Object(x.jsx)("div",{className:N.a.logo}),Object(x.jsxs)("ul",{className:n?L()(N.a.open,N.a.navLinks):N.a.navLinks,children:[Object(x.jsx)(v.b,{style:a,to:"/about",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"O stronie"})}),Object(x.jsx)(v.b,{style:a,to:"/contact",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"Kontakt"})}),Object(x.jsx)(v.b,{style:a,to:"/login",children:Object(x.jsx)("li",{onClick:function(){return s(!n)},children:"Zaloguj"})})]}),Object(x.jsx)(C,{menuToggle:n,setMenuToggle:s})]})};var I=function(){return Object(x.jsx)("h1",{children:"About"})},T=n(20),M=n.n(T);var U=function(){var e=Object(r.useContext)(p).rootState,t=e.isAuth,n=(e.theUser,Object(r.useState)("Temperatura: 0,Wilgotnosc: 0,Opady: 0,Jasnosc: 0")),s=Object(w.a)(n,2),a=s[0],c=s[1],o=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("loginToken"))){e.next=8;break}return O.a.defaults.headers.Authorization="bearer "+t,e.next=5,O.a.get("https://smartgarden.ddns.net/php-login-registration-api/weather-info.php");case 5:n=e.sent,r=n.data,c(r);case 8:console.log(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?(console.log(t),Object(x.jsxs)("div",{className:M.a["weather-container"],children:[Object(x.jsx)("br",{}),Object(x.jsx)("h1",{children:"Weather"}),Object(x.jsx)("button",{className:M.a["weather-button"],onClick:o,children:"Pobierz pogod\u0119"}),Object(x.jsxs)("ul",{className:M.a["weather-info"],children:[Object(x.jsxs)("li",{children:["Temperatura: ",a.Temperatura]}),Object(x.jsxs)("li",{children:["Wilgotnosc: ",a.Wilgotnosc]}),Object(x.jsxs)("li",{children:["Opady: ",a.Opady]}),Object(x.jsxs)("li",{children:["Jasnosc: ",a.Jasnosc]})]})]})):Object(x.jsx)(_.a,{to:"/login"})};var A=function(){return Object(x.jsx)("h1",{children:"Kontakt"})};var W=function(){return Object(x.jsx)("h1",{children:"Zawory"})},P=n(19),z=n(15),F=n.n(z);var J=function(){var e=Object(r.useContext)(p),t=e.rootState,n=e.loginUser,s=e.isLoggedIn,a=t.isAuth,c={userInfo:{login:"",password:""},errorMsg:"",successMsg:""},o=Object(r.useState)(c),u=Object(w.a)(o,2),b=u[0],h=u[1],d=function(e){h(Object(j.a)(Object(j.a)({},b),{},{userInfo:Object(j.a)(Object(j.a)({},b.userInfo),{},Object(P.a)({},e.target.name,e.target.value))}))},g=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n(b.userInfo);case 3:if(!(r=e.sent).success||!r.token){e.next=11;break}return h(Object(j.a)({},c)),localStorage.setItem("loginToken",r.token),e.next=9,s();case 9:e.next=12;break;case 11:h(Object(j.a)(Object(j.a)({},b),{},{successMsg:"",errorMsg:r.message}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O="",f="";return b.errorMsg&&(f=Object(x.jsx)("div",{children:b.errorMsg})),b.successMsg&&(O=Object(x.jsx)("div",{children:b.sucessMsg})),a?Object(x.jsx)(_.a,{to:"/weather"}):Object(x.jsx)("div",{className:F.a.homepage,children:Object(x.jsxs)("div",{id:"panel",className:F.a["form-login"],children:[Object(x.jsx)("br",{}),Object(x.jsx)("h1",{children:"Logowanie"}),Object(x.jsx)("br",{}),Object(x.jsxs)("form",{onSubmit:g,noValidate:!0,children:[Object(x.jsx)("div",{children:Object(x.jsx)("input",{className:F.a["form-input"],id:"username",name:"login",type:"text",required:!0,placeholder:"Wprowad\u017a login",value:b.userInfo.login,onChange:d})}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{className:F.a["form-input"],id:"password",name:"password",type:"password",required:!0,placeholder:"Wprowad\u017a has\u0142o",value:b.userInfo.password,onChange:d})}),f,O,Object(x.jsx)("br",{}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:F.a["form-button"],type:"submit",children:"Zaloguj si\u0119"})})]})]})})};var K=function(){var e=Object(r.useContext)(p).rootState.isAuth;return console.log(e),e?Object(x.jsx)("div",{children:Object(x.jsx)(v.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(S,{}),Object(x.jsx)("div",{className:"main",children:Object(x.jsxs)(_.d,{children:[Object(x.jsx)(_.b,{path:"/",exact:!0,component:U}),Object(x.jsx)(_.b,{path:"/valves",component:W}),Object(x.jsx)(_.b,{path:"/weather",component:U}),Object(x.jsx)(_.b,{path:"/about",component:I}),Object(x.jsx)(_.b,{path:"/contact",component:A})]})})]})})}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(v.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(S,{}),Object(x.jsx)("div",{className:"main",children:Object(x.jsxs)(_.d,{children:[Object(x.jsx)(_.b,{path:"/",exact:!0,component:J}),Object(x.jsx)(_.b,{path:"/about",component:I}),Object(x.jsx)(_.b,{path:"/contact",component:A}),Object(x.jsx)(_.b,{path:"/login",component:J})]})})]})})})};var V=function(){return Object(x.jsx)(m,{children:Object(x.jsx)(K,{})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};c.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(V,{})}),document.getElementById("root")),Y()}},[[71,1,2]]]);
//# sourceMappingURL=main.e509a750.chunk.js.map